SQL, JDBC
=========


1  Что такое первичный ключ?
----------------------------

### Википедия:
__Первичный ключ__ - один из _потенциальных ключей_ отношения, выбранный в качестве основного ключа.  
__Потенциальные ключи__ - подмножество атрибутов отношения, удовлетворяющее требованиям уникальности и минимальности (несократимости).  
__Уникальность__ - не существует двух кортежей, в которых значения этого подмножества атрибутов совпадают.  
__Минимальность__ - если из потенциального ключа убрать любой атрибут, то он перестанет быть уникальным.

### Ответ:
__Первичный ключ__ - поле или набор полей (атрибутов), однозначно (уникально) идентифицирующее запись. Таблица может иметь только один первичный ключ. Если первичный ключ состоит из двух или более полей, то он является композитным (составным). Композитный первичный ключ является несократимым. Это значит, что первичный ключ не содержит таких полей, после удаления которых ключ сохранит свойство уникальности. То есть если из составного Первичного Ключа убрать одно поле (атрибут), то он перестанет быть уникальным. Первичные ключи должны содержать только уникальные значения и не могут иметь значение NULL.

Если есть множество потенциальных ключей, обладающих такими свойствами, то из них выбирается один основной, который будет являться Первичным Ключом и использоваться для идентификации записи. В качестве первичного ключа выбирают тот ключ, который имеет наименьший размер, а также сохраняет свою уникальность со временем. Если нет подходящего компактного естественного ключа, то в качестве первичного используется суррогатный ключ.

Первичный ключ помогает поддерживать целостность данных таблицы тем, что предотвращает дублирование записей, а также служит для установления связей между таблицами.


2  Что такое внешний ключ?
--------------------------

### Я:
Внешний ключ - поле ссылающееся на первичный ключ в другой таблице.

### Википедия:
__Внешний ключ__ - подмножество атрибутов отношения, значения которых должны совпадать со значениями некоторого потенциального ключа другого отношения.

### webformyself.com:
__Внешний ключ__ - ключ используемый для объединения двух таблиц, состоящий из поля или комбинации полей, значения которых соответствуют первичному ключу в другой таблице.

### Ответ:
__Внешний ключ__ - ключ используемый для объединения таблиц. Он дает возможность ссылаться на другую таблицу или на саму себя. Состоит из поля или комбинации полей, значения которых должны совпадать со значениями первичного ключа в другой (или той же самой) таблице.

Другими словами, если мы хотим установить связь между таблицами, то берем значение первичного ключа из первой таблицы и вставляем его во вторую таблицу, где он становится внешним ключом.


3  Что такое нормализация БД?
-----------------------------

[Wikipedia: Нормальная форма](https://ru.wikipedia.org/wiki/%D0%9D%D0%BE%D1%80%D0%BC%D0%B0%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F_%D1%84%D0%BE%D1%80%D0%BC%D0%B0)

[Habr: Нормализация отношений. Шесть нормальных форм](https://habr.com/ru/post/254773/)

https://support.microsoft.com/ru-ru/help/283878/description-of-the-database-normalization-basics

__Нормализация__ - процесс преобразования отношений к виду, отвечающему Нормальным Формам. 
Это пошаговый, обратимый процесс замены исходной схемы БД другой схемой, с более простой и логичной структурой. Нормализация предназначена для приведения структуры базы данных к виду, обеспечивающему минимальную логическую избыточность и не имеет целью изменение производительности или физического объема.

Целью нормализации является уменьшение потенциальной противоречивости хранимой информации, которая может возникнуть в результате ошибок обновления. 


[Habr: Нормализация отношений. Первая и вторая нормальные формы](https://habr.com/ru/post/129195/)


3.0 Что такое Нормальная Форма
------------------------------
_Нормальная Форма_ - совокупность требований, предъявляемых к структуре отношения для устранения из базы избыточных функциональных зависимостей между атрибутами (полями таблиц), потециально приводящих к логически ошибочным результатам выборки или изменения данных.


3.1 Первая Нормальная Форма
---------------------------

__1НФ__ - Атрибуты являются простыми (атомарными), не содержат множественных значений или списков (multivalued attributes) (например два или более номера телефона, через запятую или иной разделитель), не являются составными (multipart attributes), то есть не могут быть разделены на более простые атрибуты описываемой сущности (например имя и фамилия). 

Другими словами при 1НФ пересечение каждого столбца и строки содержит одно и только одно значение.


3.2 Вторая Нормальная Форма
---------------------------

2НФ относится только к случаям если в схеме есть составной Первичный Ключ.

__2НФ__ = 1НФ + наличие Первичного Ключа + любой неключевой атрибут зависит от только Первичного Ключа (ПК) и при этом в составе ПК отсутствует меньшее подмножество атрибутов, от которого также можно вывести данную функциональную зависимость.

Другими словами во 2НФ отсутствуют зависимость атрибутов от отдельных полей входящих в состав составного Первичного Ключа.


3.3 Третья Нормальная Форма
---------------------------

__3НФ__ = 2НФ + каждый не ключевой атрибут не находится в транзитивной функциональной зависимости от Первичного ключа.

Другими словами не должно быть зависимостей одних не ключевых атрибутов от других. Все атрибуты зависят только от ключа.


3.4 Нормальная Форма Бойса-Кодда (НФБК) (частная форма 3НФ)
-----------------------------------------------------------


4  Что такое денормализация БД? Для чего она нужна?
---------------------------------------------------

https://ru.wikipedia.org/wiki/%D0%94%D0%B5%D0%BD%D0%BE%D1%80%D0%BC%D0%B0%D0%BB%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F

__Денормализация__ - намеренное приведение структуры базы данных в состояние, не соответствующее критериям нормализации, применяемое к уже нормализованной БД с целью повышения производительности. После денормализации должно происходить ускорение операций чтения из базы за счет добавления избыточных данных, которые до денормализации были получены через соединение разных таблиц.  

При нормализации количество таблиц увеличивается, что при запросах требует операций соединения таблиц, которые увеличивают время выполнения запроса.  

Для повышения производительности запросов может производится композиция нескольких таблиц в одну, которая находится, как правило во 2НФ, но не в 3НФ. Новая таблица фактически является хранимым результатом операции соединения исходных таблиц. За счет этого при запросе операции не производится соединения таблиц и запрос работает быстрее.



5  Что такое кластерный и некластерный индекс?
----------------------------------------------
Кластерный и некластерный индекс - это индексы отличающиеся по способу хранения данных.

Обычный индекс - это отсортированный набор стоблца таблицы, по которому он построен. Индекс хранит ссылки на данные каждой строки.

Кластерный индекс сохраняет в древовидной структуре не только значения столбца, а и данные всей строки. Это позволяет минимизировать количество операций чтения с диска при работе с таким индексом. Поскольку данные являются частью структуры индекса, то в таблице может быть только один кластерный индекс, а операция изменения ключевых полей - это ресурсоемкий процесс. Поэтому для кластерные индексы следует использовать редко изменяемые поля.


6  Какие типы соединений (join) таблиц существуют? В чем их разница?
--------------------------------------------------------------------
Типы соединений (join):

inner join - соединение таблиц, при котором записи первой таблицы соединяются с записями второй таблицы по указанному условию, то есть возвращает записи с совпадающими значениями в обоих таблицах.

outer join - соединение таблиц, при котором возвращаются не только записи из обеих таблиц соединенные по указанному условию, но также те записи, для которых условие не выполнено.

left outer join - возвращает все строки из левой таблицы, плюс соединенные по заданному условию строки правой таблицы.
right outer join - возвращает все строки из правой таблицы, плюс соединенные по заданному условию строки левой таблицы.
full outer join - вовзвращает соединенные по условию строки, а также все остальные строки из обеих таблиц.

natural join - соединяет строки при условии совпадения значений из столбцов имеющих одинаковые имена в обеих таблицах (по умолчанию inner join).

cross join - перекрестное (декартово) соединение таблиц, при котором все записи первой таблицы соединяются со всеми записями второй таблицы и условие соединения не указывается.



7  Что такое SQL курсор?
------------------------


8  Опишите шаги по созданию и использованию курсора
---------------------------------------------------


10  Что такое транзакция?
-------------------------

Транзакция - это операция составляющая неделимую единицу работы.
Например если нужно выполнить несколько команд добавляющих или обновляющих данные, а в промежутках между выполнением этих команд БД существовала бы в состоянии некорректных, несогласованных данных, то перед началом выполнения этих команд сначала начинают транзакцию (BEGIN), затем выполняют последовательность команд, а затем завершают транзакцию (COMMIT).

СУБД гарантирует выполнениние нескольких важных свойств:

1) _Атомарность_. Транзакция либо выполняется целиком, либо не выполняется совсем. Если бы в одной из команд произошла ошибка или мы сами прервали транзацию командой ROLLBACK, то база данных осталась бы в таком же состоянии, в котором была до команды BEGIN.

2) _Согласованность_. Когда фиксируются изменения транзакции, все ограничения целостности должны быть выполнены, иначе транзакция прерывается. Таким образом, в начале транзакции данные находятся в согласованном состоянии, и в конце работы транзакция оставляет их согласованными.

3) _Изоляция_. Пока трансакция не зафиксирована, другие пользователи не увидят несогласованные данные. За счет этого СУБД способна параллельно обслуживать много сеансов. Несколько сеансов могут одновременно читать и изменять данные, не блокируя друг друга. Блокировка возникает только при одновремнном изменении одной и той же строки двумя разными процессами.

4) _Долговечность_. Зафиксированные данные не пропадут даже в случае сбоя (при правильных настройках).



11  Что такое триггер? Какие типы триггеров вы знаете?
------------------------------------------------------


12  В чем разница между WHERE and HAVING?
-----------------------------------------
Отличия WHERE от HAVING состоит в том, что условия WHERE применяются до группировки (в них можно использовать столбцы исходных таблиц), а условия HAVING - после группировки (и в них можно также использовать столбцы таблицы-результата).


13  Что такое подзапрос (sub-query)?
------------------------------------
Оператор SELECT формирует таблицу, которая может быть выведена в качестве результата, а может быть использована в другой конструкции языка SQL в любом месте, где по смыслу может находиться таблица. Такая вложенная команда SELECT, заключенная в круглые скобки называется подзапросом.


14  Что такое union?
--------------------


15  Что такое group by?
-----------------------


17  Что такое хранимые процедуры?
---------------------------------


18  Что такое view (представление)?
-----------------------------------

db illum p 132 (4.6 Views)

### SqlQueries4MM

Представление это виртуальная таблица составленная из одной или более таблиц базы данных. Представление не содержит данные, а отображает данные хранящиеся в других таблицах. В базе данных хранится только структура Представления, которое по сути является Запросом, сохраненным под определенным именем.


19  Опишите процесс создания запроса через JDBC?
------------------------------------------------


20  Для чего используется конструкция try-with-resources?
---------------------------------------------------------
